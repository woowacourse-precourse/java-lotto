# 미션 - 로또

## 미션 요구 사항을 읽고 재정리한 규칙(게임 내용)
- 로또 구입 금액을 입력하면 해당 금액만큼의 로또를 발행한다.  
예시)1,000원 당 1장
- 발행한 로또 수량 및 번호 목록을 출력한다.  
<span style="color: orange">!!!로또 1장에 해당하는 6개의 번호들은 1 ~ 45 중 서로 다른 숫자이다.</span>  
=> 로또 번호 목록은 오름차순으로 정렬하여 출력한다. ex) 1, 5, 12, 21, 33, 41
- 당첨 번호 6개와, 보너스 번호 1개를 입력받는다.  
<span style="color: orange">!!!해당 번호들은 1 ~ 45 중 서로 다른 숫자이다.</span>  
=> 입력받는 번호는 쉼표`,`를 기준으로 구분한다.
- 발행한 로또들과, 입력받은 당첨 번호 및 보너스 번호를 비교하여 당첨 내역을 출력한다.  
=> 1등부터 5등까지의 당첨 기준 및 금액은 아래 `기능 요구 사항`을 참고한다.
- 사용자가 구입한 금액과, 당첨된 금액의 총 합을 통해 수익률을 출력한다.  
=> 수익률은 <strong>소수점 둘째 자리에서 반올림한다</strong>. ex) 100.0%, 51.5%, 1,000,000.0%
- 예외 상황 시 `[ERROR]`로 시작하는 에러 문구를 출력한다.
  1. 로또 구입 금액이 1,000원으로 나누어 떨어지지 않는 수일 경우.
  2. 입력한 당첨 번호가 6개가 아닌 경우.
  3. 입력한 보너스 번호가 1개가 아닌 경우.
  4. 당첨 번호를 1보다 작거나 45보다 큰 숫자를 입력하였을 경우.
  5. 입력한 당첨 번호 및 보너스 번호에 중복이 있을 경우.

___

## 구현할 기능 목록
- \[X]로또 구입 금액을 입력받는 함수
- \[X]입력받은 구입 금액이 올바른 값인지 검증하는 함수
  1. 숫자로 이루어진 값인가?
  2. 1,000원으로 나누어 떨어지는 금액인가?

- \[X]입력받은 구입 금액에 맞는 수량의 로또 번호를 생성하는 함수  
=> 이때, Randoms 클래스의 pickUniqueNumbersInRange() 메소드를 이용하는데, 코드를 보면 중복된 값이 나올 수 없다.  
따라서 겹치는 수가 있는지 따로 검증할 필요가 없다.
- \[X]생성한 로또의 수량과, 로또의 번호 목록을 오름차순으로 출력하는 함수  
~~=>1. 오름차순으로 출력보다는, 배열 자체를 오름차순으로 정렬해놓는 게 차후 코드 구현에 유리할 것 같아서  
Lotto 클래스의 생성자에 Collections.sort() 메소드를 이용함.~~  
=>ApplicationTest에서 입력되는 파라미터가 unmodifiable인 List.of()함수로 리턴된 값이었기 때문에, 정렬을 해놓았던 코드는 삭제 후,  
출력 시에만 해당 리스트를 복사하여 지여 변수에 저장 후 복사된 객체를 정렬 후 출력에만 사용하는 것으로 변경하였음.  
2. 출력 관련  
=>초기에는 toString()을 이용하려면 새로 오버라이딩해야 한다고 생각했음.  
=>List의 타입 매개변수가 Integer이기에, String.join 함수를 사용할 수 없어서 toString 메소드를 사용함.  
=>객체의 타입이 ArrayList 였고, ArrayList 클래스에 toString() 메소드가 오버라이딩되어 있어서  
`System.out.println(%출력할_ArrayList_타입_변수)`만으로 원하는 출력 형식인 `[1, 2, 3, 4]`를 만들어낼 수 있었음.
- \[X]당첨 번호를 입력받는 함수  
=> 입력받는 번호들은 쉼표`,`로 구분되어 있다. ex) 1,2,3,4,5,6
- \[X]입력받은 당첨 번호가 올바른 값인지 검증하는 함수
  1. 입력받은 값이 숫자가 맞는가?
  2. 입력받은 숫자들이 6개가 맞는가?  
=> Lotto 클래스의 validate 함수에 추가적인 검증을 위해 validate 함수들을 작성함.
  3. 입력받은 숫자들이 1 ~ 45 사이의 수인가?
  4. 입력받은 숫자들이 서로 중복되지 않는가?

- \[X]보너스 번호를 입력받는 함수
- \[X]입력받은 보너스 번호가 올바른 값인지 검증하는 함수
  1. 입력받은 값이 숫자가 맞는가?
  2. 입력받은 숫자가 1개가 맞는가?  
=> Integer.parseInt 메소드로 변환 이후, 1 ~ 45 사이의 수인지에 대한 검증을 통해 입력받은 숫자가 1개라는 것이 묵시적으로 검증된다.
  3. 입력받은 숫자가 1 ~ 45 사이의 수인가?
  4. 입력받은 수가 먼저 입력받은 당첨 번호와 중복되지 않는가?  
~~=> 11월 13일 새벽 1시 48분 기준, 좋은 수가 떠오르지 않아서 main() 함수에서 직접 검증하도록 구현하였다.~~  
=> 당첨 번호와 보너스 번호를 함께 관리하는 클래스 `WinningNumbersIncludingBonus`를 생성함으로써  
해당 클래스 생성자 내부에 validate 함수를 구현하여 추가하였다.
- \[X]발행한 로또들과, 입력받은 당첨 번호 및 보너스 번호를 비교하여 당첨 여부(나아가 당첨 등수)를 검사하는 함수  
  1. 당첨 번호와 로또 목록 중 하나의 로또를 뽑아 번호를 비교하는 함수를 구현.
  2. 보너스 번호가 로또 목록에 포함되어 있는지 contains()함수를 통해 확인 후 boolean 변수에 저장.
  3. Enum 클래스로 Prize(등수)를 저장하는 클래스를 만들어 해당 Enum을 통해  
각 등수마다 맞춘 번호의 개수, 당첨금과 같은 상수를 관리할 수 있도록 함.
- \[X]당첨 여부를 바탕으로 당첨 내역을 출력하는 함수
- \[X]구입 금액과, 당첨 내역을 통한 당첨 금액의 합을 토대로 수익률을 출력하는 함수  
=> 당첨 금액의 합과 구입 금액을 이용해 구한 수익률을 바탕으로, ~~String.format() 함수를 통해 소수점 둘째 자리에서 반올림을 하고~~  
DecimalFormat 클래스를 이용해 3자리마다 반점`,`이 들어갈 수 있도록 문자열을 변환함.  
=> DecimalFormat의 format() 메소드를 이용할 때 내부에 반올림 기능도 구현되어 있다는 것을 확인하고  
String.format 메소드를 호출하는 코드는 삭제하였음.  
=> `###,###.#`으로 작성 시 소수점 첫째 자리가 0일 때 소수점이 표시가 안되는 것을 확인하였음.  
`#`과 `0`의 차이를 통해, 소수점 아래 자리들의 값이 0일 때도 표시될 수 있도록 `###,###.0`으로 변경하였음.
- 코드를 작성하면서 도메인 로직을 분리할 필요를 느끼고 Output 클래스에 속해있던 메소드를 분리 및 수정하여 WinningCheck 클래스를 생성하였음.

___

## 🚀 기능 요구 사항

로또 게임 기능을 구현해야 한다. 로또 게임은 아래와 같은 규칙으로 진행된다.

```
- 로또 번호의 숫자 범위는 1~45까지이다.
- 1개의 로또를 발행할 때 중복되지 않는 6개의 숫자를 뽑는다.
- 당첨 번호 추첨 시 중복되지 않는 숫자 6개와 보너스 번호 1개를 뽑는다.
- 당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같다.
    - 1등: 6개 번호 일치 / 2,000,000,000원
    - 2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
    - 3등: 5개 번호 일치 / 1,500,000원
    - 4등: 4개 번호 일치 / 50,000원
    - 5등: 3개 번호 일치 / 5,000원
```

- 로또 구입 금액을 입력하면 구입 금액에 해당하는 만큼 로또를 발행해야 한다.
- 로또 1장의 가격은 1,000원이다.
- 당첨 번호와 보너스 번호를 입력받는다.
- 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률을 출력하고 로또 게임을 종료한다.
- 사용자가 잘못된 값을 입력할 경우 `IllegalArgumentException`를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 종료한다.

### 입출력 요구 사항

#### 입력

- 로또 구입 금액을 입력 받는다. 구입 금액은 1,000원 단위로 입력 받으며 1,000원으로 나누어 떨어지지 않는 경우 예외 처리한다.

```
14000
```

- 당첨 번호를 입력 받는다. 번호는 쉼표(,)를 기준으로 구분한다.

```
1,2,3,4,5,6
```

- 보너스 번호를 입력 받는다.

```
7
```

#### 출력

- 발행한 로또 수량 및 번호를 출력한다. 로또 번호는 오름차순으로 정렬하여 보여준다.

```
8개를 구매했습니다.
[8, 21, 23, 41, 42, 43] 
[3, 5, 11, 16, 32, 38] 
[7, 11, 16, 35, 36, 44] 
[1, 8, 11, 31, 41, 42] 
[13, 14, 16, 38, 42, 45] 
[7, 11, 30, 40, 42, 43] 
[2, 13, 22, 32, 38, 45] 
[1, 3, 5, 14, 22, 45]
```

- 당첨 내역을 출력한다.

```
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
```

- 수익률은 소수점 둘째 자리에서 반올림한다. (ex. 100.0%, 51.5%, 1,000,000.0%)

```
총 수익률은 62.5%입니다.
```

- 예외 상황 시 에러 문구를 출력해야 한다. 단, 에러 문구는 "[ERROR]"로 시작해야 한다.

```
[ERROR] 로또 번호는 1부터 45 사이의 숫자여야 합니다.
```

#### 실행 결과 예시

```
구입금액을 입력해 주세요.
8000

8개를 구매했습니다.
[8, 21, 23, 41, 42, 43] 
[3, 5, 11, 16, 32, 38] 
[7, 11, 16, 35, 36, 44] 
[1, 8, 11, 31, 41, 42] 
[13, 14, 16, 38, 42, 45] 
[7, 11, 30, 40, 42, 43] 
[2, 13, 22, 32, 38, 45] 
[1, 3, 5, 14, 22, 45]

당첨 번호를 입력해 주세요.
1,2,3,4,5,6

보너스 번호를 입력해 주세요.
7

당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 62.5%입니다.
```

---

## 🎯 프로그래밍 요구 사항

- JDK 11 버전에서 실행 가능해야 한다. **JDK 11에서 정상적으로 동작하지 않을 경우 0점 처리한다.**
- 프로그램 실행의 시작점은 `Application`의 `main()`이다.
- `build.gradle` 파일을 변경할 수 없고, 외부 라이브러리를 사용하지 않는다.
- [Java 코드 컨벤션](https://github.com/woowacourse/woowacourse-docs/tree/master/styleguide/java) 가이드를 준수하며 프로그래밍한다.
- 프로그램 종료 시 `System.exit()`를 호출하지 않는다.
- 프로그램 구현이 완료되면 `ApplicationTest`의 모든 테스트가 성공해야 한다. **테스트가 실패할 경우 0점 처리한다.**
- 프로그래밍 요구 사항에서 달리 명시하지 않는 한 파일, 패키지 이름을 수정하거나 이동하지 않는다.
- indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현한다. 2까지만 허용한다.
    - 예를 들어 while문 안에 if문이 있으면 들여쓰기는 2이다.
    - 힌트: indent(인덴트, 들여쓰기) depth를 줄이는 좋은 방법은 함수(또는 메서드)를 분리하면 된다.
- 3항 연산자를 쓰지 않는다.
- 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들어라.
- JUnit 5와 AssertJ를 이용하여 본인이 정리한 기능 목록이 정상 동작함을 테스트 코드로 확인한다.

### 추가된 요구 사항

- 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현한다.
    - 함수(또는 메서드)가 한 가지 일만 잘 하도록 구현한다.
- else 예약어를 쓰지 않는다.
    - 힌트: if 조건절에서 값을 return하는 방식으로 구현하면 else를 사용하지 않아도 된다.
    - else를 쓰지 말라고 하니 switch/case로 구현하는 경우가 있는데 switch/case도 허용하지 않는다.
- Java Enum을 적용한다.
- 도메인 로직에 단위 테스트를 구현해야 한다. 단, UI(System.out, System.in, Scanner) 로직은 제외한다.
    - 핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 분리해 구현한다.
    - 단위 테스트 작성이 익숙하지 않다면 `test/java/lotto/LottoTest`를 참고하여 학습한 후 테스트를 구현한다.

### 라이브러리

- [`camp.nextstep.edu.missionutils`](https://github.com/woowacourse-projects/mission-utils)에서 제공하는 `Randoms` 및 `Console` API를 사용하여 구현해야 한다.
    - Random 값 추출은 `camp.nextstep.edu.missionutils.Randoms`의 `pickUniqueNumbersInRange()`를 활용한다.
    - 사용자가 입력하는 값은 `camp.nextstep.edu.missionutils.Console`의 `readLine()`을 활용한다.

#### 사용 예시

```java
List<Integer> numbers = Randoms.pickUniqueNumbersInRange(1, 45, 6);
```

### Lotto 클래스

- 제공된 `Lotto` 클래스를 활용해 구현해야 한다.
- `Lotto`에 매개 변수가 없는 생성자를 추가할 수 없다.
- `numbers`의 접근 제어자인 private을 변경할 수 없다.
- `Lotto`에 필드(인스턴스 변수)를 추가할 수 없다.
- `Lotto`의 패키지 변경은 가능하다.

```java
public class Lotto {
    private final List<Integer> numbers;

    public Lotto(List<Integer> numbers) {
        validate(numbers);
        this.numbers = numbers;
    }

    private void validate(List<Integer> numbers) {
        if (numbers.size() != 6) {
            throw new IllegalArgumentException();
        }
    }

    // TODO: 추가 기능 구현
}
```

---

## ✏️ 과제 진행 요구 사항

- 미션은 [java-lotto](https://github.com/woowacourse-precourse/java-lotto) 저장소를 Fork & Clone해 시작한다.
- **기능을 구현하기 전 `docs/README.md`에 구현할 기능 목록을 정리**해 추가한다.
- **Git의 커밋 단위는 앞 단계에서 `docs/README.md`에 정리한 기능 목록 단위**로 추가한다.
    - [커밋 메시지 컨벤션](https://gist.github.com/stephenparish/9941e89d80e2bc58a153) 가이드를 참고해 커밋 메시지를 작성한다.
- 과제 진행 및 제출 방법은 [프리코스 과제 제출](https://github.com/woowacourse/woowacourse-docs/tree/master/precourse) 문서를 참고한다.
