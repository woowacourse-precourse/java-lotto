# 생각 정리
## Lotto 클래스를 사용해야 함
- numbers라는 List가 존재함
- 생성자는 리스트를 받아서 6의 사이즈가 맞는지 검사하는 메소드를 호출하는 것이다.
- validate라는 메소드는 생성자에서 호출하는 검증하는 메소드이다.
- 우선 검증하는 용도로 사용하자
- 예외를 던지는 과정에서 문제가 발생한다면 예외 메시지를 던질 수 있도록 수정

## 클래스 배치
- domain 패키지에 구매하는 로또번호 얻는 클래스와 당첨 번호 입력받는 클래스를 넣어주자
- service 패키지에 당첨 판단하는 클래스 생성, 각 등수에 맞는 당첨 금액을 지급하는 클래스 생성 오름차순 정렬 클래스, 수익률 계산 클래스

## if-else 를 사용하지 말아야 함
- List를 최대한 사용하여 인덱스에 따라서 출력을 하는 형식을 사용하면 어떨까 생각

## 커밋에 대해
커밋을 지나치게 많이 하는 것이 아닌가에 대한 고민을 해보았으나 많이 하는 것이 좋을 듯 하다
만약 롤백하는 상황이 생겼을 때 그리고 이후에 과정을 확인할 필요가 있을 때 가능한 많은 것이 좋을 듯 하다.

## Java Enum을 적용한다.
Enum을 적용해야 함
어느 부분에 적용해야 할까
Enum이 무엇인가
클래스처럼 보이게 하는 상수
서로 관련있는 상수들끼리 모아 상수들을 대표할 수 있는 이름으로 타입을 정의
Enum 클래스 형을 기반으로 한 클래스형 선언

5,000원, 50,000원 과 같은 돈을 String 형으로 가지고 있기 위해 Enum을 사용함

## 예외처리에 대해
예외를 처리하다 보니 하나하나를 위한 메소드가 너무 많아질 경향이 보임
이를 하나의 메소드에서 모두 동작시키도록 통합 메소드가 하나 필요할 듯 함

## Controller에 대해
컨트롤러에 실행을 모두 합쳐뒀더니 클래스 배치의 문제였던 것인지 너무 길고 가독성이 떨어짐
이를 어떻게 해결할 것인가..
특정 클래스를 생성하여 비슷한 범주의 것들을 묶어서 실행하고 그것을 컨트롤러에서 실행시키는 방식을 고려

## 흐름 정리
### **domain** 패키지
**MyLottoNumbers** 는 나의 로또 번호를 랜덤으로 생성해서 리스트로 반환해줌

**WinningLottoNumbers** 은 당첨 번호를 입력 받아서 리스트에 담아서 주고, 보너스 넘버도 받는다

### **service** 패키지
**BuyLotto** 는 구매 금액에 맞춰서 나의 로또 리스트를 리스트에 담아서 넘겨준다.
이 과정에서 **MyLottoNumbers** 클래스를 사용하여 랜덤으로 로또 번호를 받는다.
그리고 로또 번호 리스트를 담은 리스트를 반환한다.

**CheckNumbers** 는 당첨 번호와 나의 로또 번호 리스트를 비교하여 몇개가 일치하는지 확인한다.
그리고 일치하는 개수를 반환한다.(1등과 2등을 구분하기 위해 1등은 7개 일치로 한다)
개수를 반환하는 기능을 이용하여 최종 결과에서 사용할 것이다.

**WinningMoney** 는 금액들을 상수로 가지고 있으며 당첨 번호와 나의 로또 번호, 보너스 번호를 매개변수로 받는 메소드를 통해서 얼마 당첨인지 반환한다.
이는 **CheckNumbers** 클래스를 사용하고 있다.
그리고 **getGrade** 라는 메소드가 있는데 이 또한 **CheckNumbers** 클래스를 이용해 나의 로또 리스트의 리스트가 각각 몇개의 정답을 가지고 있는지 리스트로 반환한다.
이는 최종 결과 출력에서 사용할 것이다.

**MyTotalMoney** 는 **BuyLotto**와 **WinningMoney** 를 사용하고 있는데 나의 로또 번호를 랜덤으로 생성하는 것을 받아서 리스트를 순서대로 돌리면서 WinningMoney의 메소드를 이용하여 돈을 반환받아 총 합을 반환한다.
즉, **BuyLotto** 를 통해서 내부의 **MyLottoNumbers** 를 통해 나의 로또 번호를 만들어 내고 **WinningMoney** 를 통해서 내부에서 **CheckNumbers** 까지 접근하여 체크하는 것이다.

**ProduceWinningNumbers** 클래스는 도메인에서 생성하는 당첨번호를 사용할 수 있도록 해주는 서비스다.

**TotalYield** 는 수익률을 계산하는 클래스이다.

**RelativeLottoService** 는 로또 번호와 관련된 모든 서비스를 여기서 호출하고 해결하도록 하여 컨트롤러 단축

**RelativeResultService** 는 결과와 관련된 모든 서비스를 여기서 호출하고 해결하도록 하여 컨트롤러 단축

### view 패키지
**InputOutPutView** 이는 단순히 입력과 출력을 위한 클래스이다.


각 등수당 몇개인지 알기 위해서는 WinningMoney 객체의 getGrade 메소드를 통해 리스트를 반환받아야 한다.
그리고 그 리스트를 InputOutputView클래스로 넘겨줘서 출력하게 할 것이다.
그니까 그 이전에 위 과정을 완료해야 함

InputOutputView 클래스의 printResult가 결국 모두 출력하게 되는데
getGrade 메소드를 통해 리스트를 반환받아 여기로 넘겨줘야 한다.

## 정상 작동하지만 테스트 코드에서 문제 발생??
**Application** 으로 작동을 시켜서 수동으로 하면 정렬도 되고 모두 잘 진행이 된다.
하지만? 테스트 케이스에 문제가 발생한다
무엇이 문제일까
### 1. 기능 테스트에서 예외가 발생하며 꺼짐
무슨 예외가 발생했을까? **UnsupportedOperationException** 이라는 예외가 발생한다.
어디서 발생했을까
클래스를 타고 타고 들어가서 확인하니 **Collections.sort** 하는 부분에서 발생을 한다.
왜 이런 예외가 터지게 되는 것일까!
문제는 **List.of**에 있었다.
테스트 코드에서는 **List.of**로 **pickUniqueNumbersInRange** 로 생성할 것들에 차례대로 넣어주고 있는데 이때 List.of로 생성한 것에서 내용을 변경하려 해서 예외가 발생하고 있던 것이었다.
그럼 어떻게 해결해야 할까
**UnsupportedOperationException** 에 대한 대표적인 해결책은 **new ArrayList<>()** 할 때 () 안에 List.of를 넣어주는 것이라고 한다.
그래서 내부의 로직을 살짝 수정하여 넣어주었더니 해결이 되었다!
글로 쓰는 것은 별로 안걸리지만 해결하는데 꼬박 하루가 걸렸다...
돌고 돌고 돌아왔다...

### 2. 예외 테스트에서 IllegalArgumentException 이 정상 작동하는데 fail이 나온다...
해결중...


**추후 추가 및 수정 가능**